#!/usr/bin/env bash
# a Bash script that will display information about subdomains
# shellcheck disable=SC2086

dig_url () {
rec=$(dig $2.$1 | awk '/ANSWER SECTION:/ {getline; print $4}')
ip=$(dig $2.$1 | awk '/ANSWER SECTION:/ {getline; print $5}')
echo "A subdomain $2 is a $rec record and points at $ip"
}

[[ $# -eq 2 ]] && dig_url "$1" "$2"
[[ $# -eq 1 ]] && (
	subs=("www" "lb-01" "web-01" "web-02")
	for sub in "${subs[@]}"; do
		dig_url "$1" "$sub"
	done
)
